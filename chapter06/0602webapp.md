# 6-2. Webアプリのしくみ

## Webアプリがブラウザに表示されるまでの仕組み
### ユースケース
1. 利用者はブラウザを起動します。
2. 利用者はブラウザのアドレスバー欄にwebアプリの**URL**と入力し、Enterキーを押下します。
3. しばらくするとブラウザ上に要求したWebアプリ内容が表示されます。

...webサイトと変わんないじゃないか！

### 内部動作

![](../images/image-06-0002.png)

- (1) ブラウザからWebサーバに対して情報を要求します。webサイトと一緒！
- (2) Webサーバは要求されたリクエストをAPサーバに転送します。
- (3) APサーバは要求されたリクエストを元にプログラムを実行し、「動的に」webサイトを生成します。
- (4) APサーバで動的に生成されたwebサイトはwebサーバに送られ、そのままHTTPレスポンスとして、ブラウザに返されます。

### 動的と静的
プログラムによって、「利用者のリクエストの都度、リアルタイムに生成される」webサイトを動的サイト(dynamic site)と言います。webアプリではこの技法を活用します。

一方、通常のHTMLや画像ファイルなど、いつリクエストしても内容が変わらないファイルを静的サイト(static site)と言います。
かつてのホームページやwebデザイナさんが作成するサイト・企業ページは静的サイトが多かったですが、最近はWordPressなどの**CMS**を使うことが多いらしいので、今あるwebサイトのうち大半が動的サイトかもしれませんね。

### サーバって何？
server（サーバ）は、日常用語のサーバ（給仕さん）やビールサーバ（ビールが出てくる魔法の箱）のサーバと同じ意味で捉えてもらって構いません。

つまり、「何かを提供する機能」という意味。
- ノブを引くとビールが出てくるのがビールサーバ
- HTTPリクエストを受け取って、webサイト（ハイパーテキスト）を提供するのがwebサーバ
- SQLを送ると結果が返ってくるのがDBサーバ

という感じです。この中で特に重要なのがビールサーバです。
これがないと、日常生活に支障をきたすレベルでやばい。

注意点として、システム業界で「サーバ」という場合、ハードウェアを指す場合とソフトウェアを指す場合があるのがややこしいのですが、
最近のクラウド化によって、ハードウェアの境界も曖昧になってきたので、もうあまり神経質に考えることもないのかな、と思います。ここら辺帰社日に直接講義する時にもう少し詳しく話すかも。

さて、上の図で唐突に**APサーバ**という言葉が出てきました。こいつはなんでしょう？

APはApplication（アプリケーション）の略で、というと予想がつくと思いますが、アプリケーション機能を提供するサーバです。

APサーバには複数のアプリケーションを載せることができ、利用者からのリクエストに応じて対応するアプリを動作させ、結果を利用者に返します。

これから皆さんはサーブレットというJavaの機能を使ったサンプルアプリや、商蔵というアプリを作るわけですが、作ったアプリは「Apache Tomcat」という名前のAPサーバに載せて動作させます。

### APサーバの種類
Javaで作ったwebアプリを載せることができるAPサーバにはいくつか種類があります。そのいくつかをご紹介（面接対策！）

| 名前 | 説明 |
| -- | -- |
| WebSphere | IBM製。一番よく見るような気がする。 |
| Apache Tomcat | オープンソース。予算の少ないプロジェクトでよく見る |
| JBoss | Red Hat製。これもよく見る |
| Wildfly | JBossのオープンソース版 |
| WebLogic | Oracle製（だったっけ？）。みょうちんは触ったことない。誰か経験者いる？ |
| GlassFish | Oracle管理のオープンソース。NetBeansダウンロードしたら、一緒についてくるやつ |

